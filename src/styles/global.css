@import 'tailwindcss';

@custom-variant dark (&:where(.dark, .dark *));

@theme {
  --font-sans: var(--font-karla);
  --color-primary: #334155; /* Deep slate navy */
  --color-muted: #e5e7eb; /* Neutral soft gray */
  --color-tertiary: #6b7280; /* Mid gray */
  --color-surface: #ffffff;
  --color-accent: #64748b; /* Muted blue-gray accent */
  --color-secondary: #f8fafc;
  --color-foreground: #1e293b; /* Deep slate text */
  --color-background: #f9fafb;
  --color-link: #2563eb; /* Distinct accessible blue for links */
}

.dark {
  --color-primary: #94a3b8; /* Muted silver-blue */
  --color-muted: #475569;
  --color-tertiary: #64748b;
  --color-surface: #1e293b;
  --color-accent: #7dd3fc; /* Subtle blue accent pop */
  --color-secondary: #334155;
  --color-foreground: #f3f4f6;
  --color-background: #0f172a;
  --color-link: #93c5fd; /* Softer, bright link color for dark mode */
}

.typography {
  @apply text-[1.05rem] leading-7 text-foreground;

  /* Headings — slightly more relaxed leading */
  h1 {
    @apply text-4xl font-semibold leading-[1.2] mb-4 mt-12 tracking-tight;
  }
  h2 {
    @apply text-3xl font-medium leading-[1.3] mb-4 mt-10 tracking-tight;
  }
  h3 {
    @apply text-2xl font-medium leading-[1.35] mb-3 mt-8;
  }
  h4 {
    @apply text-xl font-medium leading-[1.4] mb-2 mt-6;
  }
  h5 {
    @apply text-lg font-medium leading-[1.45] mb-1 mt-5;
  }
  h6 {
    @apply text-base font-medium leading-[1.5] mt-4;
  }

  /* Body & lists */
  p {
    @apply text-[1.05rem] leading-7 mb-5 text-foreground/90;
  }
  ul,
  ol {
    @apply pl-5 mb-5 text-[1.05rem] leading-7 text-foreground/90;
  }
  li {
    @apply mb-1;
  }

  /* Links — more distinct color */
  a {
    color: var(--color-link);
    @apply no-underline hover:underline hover:opacity-80 transition;
  }

  /* Blockquote */
  blockquote {
    @apply border-l-2 border-accent pl-4 italic text-tertiary text-[1.05rem] leading-7 my-6;
  }

  /* Misc */
  hr {
    @apply border-muted my-8;
  }
  img {
    @apply max-w-full rounded-xl my-5;
  }
  table {
    @apply w-full text-left border-collapse my-6;
  }
  th,
  td {
    @apply border border-muted px-4 py-2 text-[1rem] leading-relaxed;
  }
  strong {
    @apply font-medium text-foreground;
  }
  em {
    @apply italic text-foreground/90;
  }
  small {
    @apply text-sm text-tertiary;
  }
  pre {
    @apply mb-6 px-2 py-2 text-[0.95rem] leading-relaxed;
  }
}

.type-standard {
  @apply text-base leading-6 text-foreground;

  /* Headings — subtle loosened leading */
  h1 {
    @apply text-3xl font-semibold leading-[1.25] tracking-tight;
  }
  h2 {
    @apply text-2xl font-medium leading-[1.3] tracking-tight;
  }
  h3 {
    @apply text-xl font-medium leading-[1.35];
  }
  h4 {
    @apply text-lg font-medium leading-[1.4];
  }
  h5 {
    @apply text-base font-medium leading-[1.45];
  }
  h6 {
    @apply text-sm font-medium uppercase tracking-wide text-tertiary leading-[1.5];
  }

  /* Lists */
  ul {
    @apply list-disc pl-5;
  }
  ol {
    @apply list-decimal pl-5;
  }

  li {
    @apply mb-1;
  }

  /* Links — consistent blue tone */
  a {
    color: var(--color-link);
    @apply no-underline hover:underline hover:opacity-80 transition;
  }

  /* Quotes, separators, tables, etc. */
  blockquote {
    @apply border-l-2 border-accent pl-4 italic text-tertiary;
  }
  hr {
    @apply border-muted my-6;
  }
  img {
    @apply max-w-full rounded-lg;
  }
  table {
    @apply w-full text-left border-collapse;
  }
  th,
  td {
    @apply border border-muted px-4 py-2 text-base;
  }
  strong {
    @apply font-medium text-foreground;
  }
  em {
    @apply italic text-foreground/90;
  }
  small {
    @apply text-sm text-tertiary;
  }
}

.astro-code,
.astro-code span {
  color: var(--shiki-dark) !important;
  background-color: var(--shiki-dark-bg) !important;
  font-style: var(--shiki-dark-font-style) !important;
  font-weight: var(--shiki-dark-font-weight) !important;
  text-decoration: var(--shiki-dark-text-decoration) !important;
}

/* Also support explicit .dark class on html (Tailwind style) */
html.dark .astro-code,
html.dark .astro-code span {
  color: var(--shiki-dark) !important;
  background-color: var(--shiki-dark-bg) !important;
  font-style: var(--shiki-dark-font-style) !important;
  font-weight: var(--shiki-dark-font-weight) !important;
  text-decoration: var(--shiki-dark-text-decoration) !important;
}

/* Inline <code> styling */
code {
  @apply text-primary text-lg;
}

/* Code blocks smaller font */
.astro-code {
  @apply text-base leading-relaxed;
}

.astro-code code {
  @apply text-base;
}

/* Dark mode inline code */
@media (prefers-color-scheme: dark) {
  code {
    @apply text-accent bg-secondary;
  }
}

html.dark code {
  @apply text-accent bg-secondary;
}
